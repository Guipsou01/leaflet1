<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet Image Filter Example</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map { height: 500px; }
    </style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://ivansanchez.github.io/Leaflet.ImageOverlay.Rotated/Leaflet.ImageOverlay.Rotated.js"></script>
<script>
    // Initialisation de la carte
    const map = L.map('map').setView([0, 0], 2); // Vue initiale sur le centre du monde
    // Stocker les overlays ajoutés
    const overlays = [];

    // Fonction pour charger les images selon la zone visible
    function loadImages() {
        // Supprimer les images existantes
        overlays.forEach(overlay => {
            map.removeLayer(overlay);
        });
        overlays.length = 0; // Réinitialiser le tableau des overlays

        // Charger les images si elles sont visibles
        //*
        const imageOverlay1 = L.imageOverlay("https://static.wikia.nocookie.net/terminalmontage/images/4/4e/Screen_Shot_2022-07-15_at_3.30.11_PM.png", [[-10, -10], [10, 10]]).addTo(map);
        if (imageOverlay1) {
            overlays.push(imageOverlay1); // Conserver l'overlay pour le gérer plus tard
        }//*/
        //*
        const imageOverlay2 = L.imageOverlay("https://static.wikia.nocookie.net/terminalmontage/images/4/4e/Screen_Shot_2022-07-15_at_3.30.11_PM.png", [[-5, -5], [5, 5]]).addTo(map);
        if (imageOverlay2) {
            overlays.push(imageOverlay2); // Conserver l'overlay pour le gérer plus tard
        }//*/
        //*
        const imageOverlay3 = L.imageOverlay.rotated("https://static.wikia.nocookie.net/terminalmontage/images/4/4e/Screen_Shot_2022-07-15_at_3.30.11_PM.png", [3,7], [17,7], [3,-4]).addTo(map);
        if (imageOverlay3) {
        overlays.push(imageOverlay3); // Conserver l'overlay pour le gérer plus tard
        }//*/
    }

    // Événement pour charger les images lors du déplacement de la carte
    map.on('moveend', loadImages);

    // Charger les images initialement
    loadImages();
</script>

</body>
</html>
